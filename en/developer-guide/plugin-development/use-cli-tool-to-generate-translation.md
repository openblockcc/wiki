---
title: Use Cli Tool to Generate Translation
description: 
published: true
date: 2024-10-17T04:40:37.753Z
tags: developer
editor: markdown
dateCreated: 2024-10-17T04:40:37.753Z
---

# Generating Translations Using CLI Tool

All translation files maintained by OpenBlock are automatically generated using a CLI tool. The project automatically pushes and pulls translations from Transifex and generates the `translations.js` file. Any resources marked as `official: true` in the `index.js` file will be automatically processed.

As a third-party developer, you can also use this CLI tool in your own resources to quickly generate multilingual template files, speeding up the process of creating translation files and reducing the chance of errors or omissions when manually creating them.

1. First, we need to install the `openblock-resource` package globally using `npm`, as we will use its built-in CLI command to generate translation files.

    ```bash
    npm i -g openblock-resource
    ```

2. Using the commonLed resource created in the [Adding an Extension](./add-a-extension) Quick Start as an example, to allow the CLI tool to automatically process `Blockly.Msg.XXX` content used in the `blocks.js` file, we need to create a `msg.json` file and define the default text content in it.

   In the commonLed resource path, create `msg.json` and add the following content.

    ```json
    {
        "COMMONLED_CATEGORY": "COMMONLED LED",
        "COMMONLED_SETLEDSTATE": "set pin %1 LED %2",
        "COMMONLED_ON": "on",
        "COMMONLED_OFF": "off"
    }
    ```

3. Then we can run the CLI command to automatically generate the translation file.

   Run the following command in the commonLed directory.

    ```
    i18n-update --thirdParty=true
    ```

   Once the command is successfully executed, we can see the CLI output in the terminal, indicating that the translation file for commonLed has been automatically generated.

    ```
    Translations file is created in path: {...}/extensions/commonLed/translations.js
    ```

   At this point, we can open the `translations.js` file and see the following content.

    ```js
    // The en part of this file is automatically generated. Do not modify.
    /* eslint-disable func-style */
    /* eslint-disable require-jsdoc */
    /* eslint-disable quotes */
    /* eslint-disable quote-props */
    /* eslint-disable dot-notation */
    /* eslint-disable max-len */
    function getInterfaceTranslations () {
        return {
            "en": {
                "commonLed.name": "Common LED",
                "commonLed.description": "This is a demo with a common led."
            },
            "ru": {
                "commonLed.name": "Common LED",
                "commonLed.description": "This is a demo with a common led."
            },
            "zh-cn": {
                "commonLed.name": "Common LED",
                "commonLed.description": "This is a demo with a common led."
            },
            "zh-tw": {
                "commonLed.name": "Common LED",
                "commonLed.description": "This is a demo with a common led."
            }
        };
    }

    function registerScratchExtensionTranslations () {
        return {};
    }

    function registerBlocksMessages (Blockly) {
        Object.assign(Blockly.ScratchMsgs.locales["en"],
            {
                "COMMONLED_CATEGORY": "COMMONLED LED",
                "COMMONLED_OFF": "off",
                "COMMONLED_ON": "on",
                "COMMONLED_SETLEDSTATE": "set pin %1 LED %2"
            }
        );

        Object.assign(Blockly.ScratchMsgs.locales["ru"],
            {
                "COMMONLED_CATEGORY": "COMMONLED LED",
                "COMMONLED_OFF": "off",
                "COMMONLED_ON": "on",
                "COMMONLED_SETLEDSTATE": "set pin %1 LED %2"
            }
        );

        Object.assign(Blockly.ScratchMsgs.locales["zh-cn"],
            {
                "COMMONLED_CATEGORY": "COMMONLED LED",
                "COMMONLED_OFF": "off",
                "COMMONLED_ON": "on",
                "COMMONLED_SETLEDSTATE": "set pin %1 LED %2"
            }
        );

        Object.assign(Blockly.ScratchMsgs.locales["zh-tw"],
            {
                "COMMONLED_CATEGORY": "COMMONLED LED",
                "COMMONLED_OFF": "off",
                "COMMONLED_ON": "on",
                "COMMONLED_SETLEDSTATE": "set pin %1 LED %2"
            }
        );

        return Blockly;
    }

    if (typeof module !== 'undefined') {
        module.exports = {getInterfaceTranslations};
    }
    exports = registerScratchExtensionTranslations;
    exports = registerBlocksMessages;
    ```

   As we can see, the CLI tool has automatically generated all the translation text. However, the CLI tool only generates the default text used when defining multilingual content. Other language translations need to be manually updated.

> When running the CLI command, be sure to use the `--thirdParty=true` flag to prevent the CLI tool from attempting to fetch translation content from Transifex.
{.is-warning}

> The `i18n-update --thirdParty=true` command should be executed in the resource package path for the translation file to be generated correctly.
{.is-warning}

> Running the `i18n-update --thirdParty=true` command will overwrite the original `translations.js` file. If you want to update translations after modifying or adding multilingual text, use the `git` tool to commit the previous old translations first. After all language translations are overwritten, you can manually merge the old translation content using `git`.
{.is-warning}
